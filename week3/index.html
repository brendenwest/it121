<html>
<body>
<script src="Seattle_Crime_Stats_2013.js"></script>

<script>
    // define variable for the array index of each data value, for readability of later code
    var INDEX_MONTH    = 0;
    var INDEX_PRECINCT = 1;
    var INDEX_CRIME    = 2;
    var INDEX_COUNT    = 3;

    // helper array for translating month number to name
    var month_names = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    
    // temp arrays for 
    var crime_types = [];
    var precincts = [];

    // helper array to hold counts by month
    var assaults_by_month = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    
    var burglaries_by_precinct = [0, 0, 0, 0, 0];
    var total_burglaries = 0;

    for (row in crime_stats) {
        
        // check that our data are clean and reliable
        // first, check the list of precincts
        if (precincts.indexOf(crime_stats[row][INDEX_PRECINCT]) == -1) {
            precincts.push(crime_stats[row][INDEX_PRECINCT]);
        }
        // second, check the list of crimes
        if (crime_types.indexOf(crime_stats[row][INDEX_CRIME]) == -1) {
            crime_types.push(crime_stats[row][INDEX_CRIME]);
        }

        if (crime_stats[row][INDEX_CRIME] == "Assault") {
            assaults_by_month[crime_stats[row][INDEX_MONTH]-1] += crime_stats[row][INDEX_COUNT];
        }
        
        if (crime_stats[row][INDEX_CRIME] == "Burglary") {
            // code for tallying homicide reports would go here
            total_burglaries += crime_stats[row][INDEX_COUNT];
            switch (crime_stats[row][INDEX_PRECINCT]) {
                case "E":
                    burglaries_by_precinct[0] += crime_stats[row][INDEX_COUNT];
                    break;
                case "W":
                    burglaries_by_precinct[1] += crime_stats[row][INDEX_COUNT];
                    break;
                case "SE":
                    burglaries_by_precinct[2] += crime_stats[row][INDEX_COUNT];
                    break;
                case "N":
                    burglaries_by_precinct[3] += crime_stats[row][INDEX_COUNT];
                    break;
                case "SW":
                    burglaries_by_precinct[4] += crime_stats[row][INDEX_COUNT];
                    break;
            }
        }
    }
    
    var max_burglaries = 0;
    var max_precinct = -1;
    for (precinct in burglaries_by_precinct) {
        if (burglaries_by_precinct[precinct] > max_burglaries) {
            max_burglaries = burglaries_by_precinct[precinct];
            max_precinct = precinct;
        } 

    }
    
    var min_assaults = 10000;
    var min_month = -1;
    for (month in assaults_by_month) {
        if (assaults_by_month[month] < min_assaults) {
            min_assaults = assaults_by_month[month];
            min_month = month;
        } 

    }

    // show basic info about data set to verify it's not garbled
    document.write("<ul><li><b>Total reports:</b> " + crime_stats.length)
    document.write("<li><b>Precincts:</b> " + precincts);
    document.write("<li><b>Crime types:</b> " + crime_types);
    document.write("<li><b>Total burglaries:</b> " + total_burglaries);
    document.write("<li><b>Avg. burglaries:</b> " + total_burglaries/precincts.length);
    document.write("<li><b>Precinct with most burglaries:</b> " + precincts[max_precinct]);
    document.write("<li><b>Month with fewest assaults:</b> " + month_names[min_month]);

    document.write("</ul>");
    
    /*
    Total Burglaries reported in 2013
Precinct with the most burglaries: 
Average number of burglaries per precinct: 
Month with fewest assaults reported

    */
    
    
</script>

</body>
</html>